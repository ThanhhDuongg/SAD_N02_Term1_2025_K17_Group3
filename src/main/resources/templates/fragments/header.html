<div th:fragment="header" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">
    <header class="header">
        <div class="header-left">
            <img th:src="@{/images/logo-phenikaa.png}" alt="Phenikaa Logo" class="header-logo" />
            <div class="header-text">
                <h1 class="header-title">Phenikaa University</h1>
                <p class="header-subtitle">Hệ thống quản lý ký túc xá</p>
            </div>
        </div>
        <div class="header-right">
            <div class="user-profile" sec:authorize="isAuthenticated()">
                <div class="user-avatar" th:text="${#strings.substring(#authentication.name,0,1).toUpperCase()}">U</div>
                <div class="user-meta">
                    <span class="user-name" th:text="${#authentication.name}">Người dùng</span>
                    <span class="user-role"
                          th:text="${#lists.join(#authentication.authorities.![#strings.replace(authority, 'ROLE_', '')], ', ')}">ROLE</span>
                </div>
                <form th:action="@{/logout}" method="post" class="logout-form">
                    <button type="submit" class="logout-btn">Đăng xuất</button>
                </form>
            </div>
            <a class="login-link" th:href="@{/login}" sec:authorize="!isAuthenticated()">Đăng nhập</a>
        </div>
    </header>
</div>
<div th:fragment="popup" xmlns:th="http://www.thymeleaf.org">
    <div id="popup-message" th:if="${message}" th:class="'popup-alert ' + ${alertClass}" style="display:none;">
        <span th:text="${message}"></span>
    </div>
    <script>
        function closePopup() {
            const popup = document.getElementById('popup-message');
            if (popup) {
                popup.style.display = 'none';
            }
        }
        window.addEventListener('DOMContentLoaded', function() {
            const popup = document.getElementById('popup-message');
            if (popup) {
                popup.style.display = 'flex';
                setTimeout(function() { popup.style.display = 'none'; }, 3000);
            }
        });
    </script>
</div>
