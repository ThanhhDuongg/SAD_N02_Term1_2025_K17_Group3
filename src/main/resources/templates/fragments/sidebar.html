<!-- Sidebar Fragment -->
<div th:fragment="sidebar"
     xmlns:th="http://www.thymeleaf.org"
     xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <aside class="sidebar">

        <div class="sidebar-section" sec:authorize="hasAnyRole('ADMIN','STAFF')">
            <h3 class="sidebar-title">Bảng điều khiển</h3>
            <nav class="sidebar-nav">
                <a th:href="@{/dashboard}" class="sidebar-link">
                    <i class="fas fa-chart-pie"></i>
                    <span>Tổng quan</span>
                </a>
            </nav>
        </div>

        <!-- Quản lý chính -->
        <div class="sidebar-section" sec:authorize="hasRole('ADMIN')">
            <h3 class="sidebar-title">Quản trị hệ thống</h3>
            <nav class="sidebar-nav">
                <a th:href="@{/students}" class="sidebar-link">
                    <i class="fas fa-user-graduate"></i>
                    <span>Sinh viên</span>
                </a>
                <a th:href="@{/rooms}" class="sidebar-link">
                    <i class="fas fa-bed"></i>
                    <span>Phòng</span>
                </a>
                <a th:href="@{/contracts}" class="sidebar-link">
                    <i class="fas fa-file-contract"></i>
                    <span>Hợp đồng</span>
                </a>
                <a th:href="@{/fees}" class="sidebar-link">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Phí & thanh toán</span>
                </a>
            </nav>
        </div>

        <div class="sidebar-section" sec:authorize="hasAnyRole('ADMIN','STAFF')">
            <h3 class="sidebar-title">Hỗ trợ sinh viên</h3>
            <nav class="sidebar-nav">
                <a th:href="@{/maintenance}" class="sidebar-link">
                    <i class="fas fa-headset"></i>
                    <span>Yêu cầu hỗ trợ</span>
                </a>
                <a th:href="@{/violations}" class="sidebar-link">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Thông báo vi phạm</span>
                </a>
            </nav>
        </div>

        <!-- Khác -->
        <div class="sidebar-section">
            <h3 class="sidebar-title">Khác</h3>
            <nav class="sidebar-nav">
                <a href="javascript:void(0)" class="sidebar-link special" id="aboutBtn">
                    <i class="fas fa-info-circle"></i>
                    <span>Giới thiệu</span>
                </a>
            </nav>
        </div>
    </aside>

    <!-- Modal Giới thiệu -->
    <div id="aboutModal" class="modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h2>Giới thiệu</h2>
            <p>
                Website này được phát triển để hỗ trợ công tác quản lý ký túc xá của
                <strong>Đại học Phenikaa</strong>.
                Sản phẩm được tạo bởi <strong>OOP_N01_Term3_2025_K17_Group9</strong> - Trường CNTT Phenikaa.
            </p>
        </div>
    </div>

    <!-- Script xử lý modal -->
    <script>
        const aboutBtn = document.getElementById('aboutBtn');
        const aboutModal = document.getElementById('aboutModal');
        const closeBtn = aboutModal.querySelector('.modal-close');

        if (aboutBtn && aboutModal && closeBtn) {
            aboutBtn.addEventListener('click', () => {
                aboutModal.style.display = 'flex';
            });

            closeBtn.addEventListener('click', () => {
                aboutModal.style.display = 'none';
            });

            window.addEventListener('click', (e) => {
                if (e.target === aboutModal) {
                    aboutModal.style.display = 'none';
                }
            });
        }
    </script>
</div>
